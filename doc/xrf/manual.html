<!-- otherwise degree symbol renders as circumflex capital A + degree symbol -->
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<body bgcolor="#DDDDDD">
<!-- viewing light gray is far less painful than pure white -->
<h2 id="laccorecsdco-xrf-converter-users-guide">LacCore/CSDCO XRF Converter User's Guide</h2>
<p><em>December 15, 2020</em><br />
<em>version 1.3</em></p>
<h2 id="introduction">Introduction</h2>
<p>LacCore/CSDCO XRF Converter is a software utility developed by <a href="https://csdco.umn.edu">LacCore/CSDCO</a> to prepare core imagery generated by XRF and X-radiographic core scanners for viewing and use in applications like the visualization tool <a href="https://csdco.umn.edu/resources/software/corelyzer">Corelyzer</a>.</p>
<p>The Converter was developed to replace a collection of Photoshop scripts. It is free, available for Windows and macOS/OSX, written in <a href="https://python.org">Python</a>, and leans heavily on the <a href="https://opencv.org/">OpenCV</a> imaging library. Source code is available on <a href="https://github.com/laccore/ImageProcessing">GitHub</a>.</p>
<h2 id="overview">Overview</h2>
<p>For each horizontally-oriented radiograph image processed, the Converter:</p>
<ol type="1">
<li>Rotates the image 180 degrees so core top is at the left of the image</li>
<li>Adds a ruler to the bottom of the image</li>
<li>Performs gamma correction with a user-defined value to maximize image contrast</li>
<li>Creates a TIFF of the resulting image</li>
</ol>
<h2 id="preparing-to-use-the-converter">Preparing to Use the Converter</h2>
<p>The Converter expects that:</p>
<ul>
<li>Core and ruler images are in TIFF or JPEG format.</li>
<li>Core images are grayscale, not RGB.</li>
<li>Core images are horizontally-oriented, with the core top at the right of the image.</li>
<li>Ruler images are horizontally-oriented, with values increasing from left to right.</li>
<li>Ruler images can be grayscale or RGB.</li>
<li>The width of the applied ruler image is greater than or equal to the width of the core image(s) being processed.</li>
</ul>
<p>It is <strong>critical</strong> to ensure the resolution of the ruler image matches the resolution of the image(s) being processed or the scale will be inaccurate. The application provides a single grayscale ruler image with resolution 127 dots per inch (DPI), or 5 pixels per millimeter (ppmm).</p>
<p>If your core imagery isn't 127 DPI/5 ppmm, you'll need to provide your own ruler image(s). We created our ruler image by scanning a physical ruler on our linescan imager, and suggest you do the same. Alternately, you can use an image editing tool like Photoshop or (free and open-source) <a href="https://www.gimp.org/">GIMP</a> to resize the provided ruler as needed. Note that if you need a higher-resolution ruler, scanning is recommended. Upscaling in an image editing tool will result in a blurry, pixellated ruler image.</p>
<p>To make your ruler images available in the Converter, place them in the "rulers" folder alongside the Converter application, then restart the Converter if it's currently running. Your ruler images should now be available in the Ruler dropdown menu.</p>
<p><img src="images/rulersdir.png" /></p>
<p>There is no limit to the number of ruler images that can be added.</p>
<h2 id="main-window">Main Window</h2>
<p>The application consists of a single window.<br />
<img src="images/mainwindow.png" /></p>
<h2 id="adding-images-and-specifying-processing-options">Adding Images and Specifying Processing Options</h2>
<p>First, add one or more radiograph images to be processed. Images can be selected via the "Add" button, or by dragging and dropping files into the "Images to be converted" list. Next, specify desired processing options. A description of each option follows:</p>
<p><strong>Gamma Correction</strong><br />
A gamma correction value greater than zero. Smaller values result in darker imagery, larger values brighter. We suggest starting with a value around 1.5 and making adjustments based on your desired brightness and contrast. Typically, gamma correction values below 0.8 produce a dark, insufficiently-contrasting image. Similarly, values above 2.3 usually produce a bright, insufficiently-contrasting image. But of course you're free to use any value that yields satisfactory results!</p>
<p><img src="images/gammalevels.jpg" /></p>
<p><strong>Ruler</strong><br />
A list of the ruler images in the "rulers" directory. The selected ruler image will be added to the bottom of the core image.</p>
<p><strong>Output Naming</strong><br />
Output images can be named in one of two ways:</p>
<ol type="1">
<li>Use input file's name. Each output image will have the same filename as the input image file.</li>
<li>Use name of input file's parent directory. Each output image will have the same name as the input image's parent directory.</li>
</ol>
<p><strong>Save Settings as Default</strong><br />
You can save the current set of options by clicking the "Save Settings as Default" button. They will be restored the next time the Converter is launched.</p>
<h2 id="processing-images">Processing Images</h2>
<p>Now that your options are set, you can process your images! To do so, click the "Convert Images" button. A progress bar will be displayed during conversion, and a message will be displayed when conversion is complete.</p>
<p><strong>Output File Location</strong><br />
The Converter creates a directory called "radiograph" alongside the application where it places output files.</p>
<p><img src="images/outputdir.png" /></p>
<h2 id="thats-it">That's It!</h2>
If you have any problems using the LacCore/CSDCO XRF Converter, questions, comments, or discover bugs, please <a href="https://csdco.umn.edu/forms/contact-csdco">contact us</a>!
</body>
