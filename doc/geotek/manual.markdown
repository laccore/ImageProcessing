<!-- otherwise degree symbol renders as circumflex capital A + degree symbol -->
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<body bgcolor="#DDDDDD"> <!-- viewing light gray is far less painful than pure white -->
LacCore/CSDCO Geotek Converter User's Guide
--------------------
*May 9, 2019*  
*version 2.2*

## Introduction

LacCore/CSDCO Geotek Converter is a software utility developed by [LacCore/CSDCO](https://csdco.umn.edu) to
prepare core imagery generated by digital linescan imagers (Geotek MSCL-CIS and DMT CoreScan) for viewing
and use in applications like the visualization tool [Corelyzer](https://csdco.umn.edu/resources/software/corelyzer),
and the Initial Core Description (ICD) tool [PSICAT](https://csdco.umn.edu/resources/software/psicat).

The Converter was developed to replace a collection of Photoshop scripts. It is free, available for Windows and macOS/OSX, written in [Python](https://python.org),
and leans heavily on the [OpenCV](https://opencv.org/) imaging library. Source code is available
on [GitHub](https://github.com/laccore/ImageProcessing).

## What the Converter Does

For each vertically-oriented core image processed, the Converter:

1. Rotates the image 90&deg; counter-clockwise so it's horizontally-oriented with core top at left
2. Optionally trims a user-defined length from the core top (now the left side of the image)
3. Adds a ruler to the bottom of the image
4. Creates a TIFF of the resulting image, maintaining full image quality
5. Creates a JPEG of the resulting image, reducing file size by a factor of ~20 with minimal loss of image quality
6. Creates a JPEG suitable for Initial Core Description (ICD) by:
    - Downscaling the image by a user-specified percentage, then
    - Rotating 90&deg; clockwise so it's vertically-oriented, with core top at image top.

![](images/overview.jpg)

## Preparing to Use the Converter

The Converter expects that:

- Core and ruler images are in TIFF or JPEG format.
- Core images are vertically-oriented, with the core top at the top of the image.
- Ruler images are horizontally-oriented, with values increasing from left to right.
- Core images are RGB with 16-bit or 8-bit color depth.
- Ruler images are RGB or grayscale, with 16-bit or 8-bit color depth. Ruler images are automatically adjusted to match the color depth of the core image.
- The width of the applied ruler image is greater than or equal to the height of vertically-oriented core images being converted.

It is **critical** to ensure the resolution of the ruler image matches the resolution of the core image(s) being processed
or the ruler's depth scale will be inaccurate.

The application provides a single grayscale ruler image with resolution 508 dots
per inch (DPI), or 20 pixels per millimeter (ppmm).

If your core imagery isn't 508 DPI/20 ppmm, you'll need to provide your own ruler image(s). We created our ruler image
by scanning a physical ruler on our linescan imager, and suggest you do the same.

Alternately, if you need a lower-resolution ruler, an image editing tool like Photoshop or (free and open-source) [GIMP](https://www.gimp.org/) can be used to downscale the provided ruler as needed. For instance, if you need a 254 DPI
ruler, resize the provided 508 DPI ruler to 50% (508 dots/inch * 0.5 = 254 dots/inch) of its original size. Note that this
method won't work well if you need a higher-resolution ruler, as an upscaled image will appear blurry/pixellated.

To make your ruler images
available to the Converter, place them in the "rulers" folder alongside the Converter application, then restart the Converter
if it's currently running. Your ruler images should now be available in the Ruler dropdown menu.

![](images/rulersdir.png)

There is no limit to the number of ruler images that can be added.

## Main Window
The application consists of a single window.  
![](images/mainwindow.png)

## Adding Images and Specifying Processing Options

First, add one or more images to be processed. Images can be selected via the "Add" button, or by dragging and dropping
files into the "Images to be converted" list. Next, specify desired processing options. A description of each option follows:

**Image and Ruler DPI**  
The resolution of core image(s) and ruler image, in dots per inch (DPI), e.g. 508.

**Trim __ inches from top of core image**  
If the core top contains extraneous pixels, they can be removed from the output images.
The amount to remove is indicated in inches, which is converted to pixels based on the value in **Image and Ruler DPI**.
Note that the "dots" in "dots per inch" is synonymous with "pixels" in this context.
  
For example, trimming 0.25 inches with a DPI of 508 would result in the leftmost 127 pixels (0.25 inch \* 508 pixels/inch)
being removed from output images.

If you don't want to trim anything, set this value to zero or leave it blank.
  
**Resize ICD-ready Image by \_\_ \%**  
The percentage by which the output ICD image should be downscaled, relative to the original image size.  
For example, with a value of 30%, a 1000 x 240 image would be downscaled to 300 x 72.

**Ruler**  
A list of the ruler images in the "rulers" directory. The selected ruler image will be added to the bottom of the core image.

**Output Naming**  
Output images can be named in one of two ways:

1. Use input file's name. Each output image will have the same filename as the input image file.
2. Use name of input file's parent directory. Each output image will have the same name as the input image's parent directory.

**Save Settings as Default**  
You can save the current set of options by clicking the "Save Settings as Default" button. They will be
restored the next time the Converter is launched.

## Processing Images

Now that your options are set, you can finally process your images! To do so, click the "Convert Images" button.
A progress bar will be displayed during conversion, and a message will be displayed when conversion is complete.

**Output File Location**  
The Converter creates three directories alongside the application, where it places the output files:

1. tiff: contains the full-quality TIFF image(s) with ruler added
2. jpeg: contains the high-quality compressed JPEG image(s) with ruler added
3. ICD: contains the vertically-oriented, downscaled JPEG image(s) with ruler added

![](images/outputdirs.png)

## That's It!
If you have any problems using the LacCore/CSDCO Geotek Converter, questions, comments, or discover bugs, please [contact us](https://csdco.umn.edu/forms/contact-csdco)!
</body>